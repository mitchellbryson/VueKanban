webpackJsonp([1],{"9wWf":function(t,e){},"I+po":function(t,e){},JJGO:function(t,e){},NHnr:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=r("7+uW"),n={name:"KanbanCard",props:["card"],data:function(){return{newTitle:this.card.title,editing:!1}},methods:{toggleEdit:function(){var t=this;this.editing=!this.editing,this.editing&&this.$nextTick(function(){var e=t.$refs.editTitle;e.focus(),e.select()})},update:function(){this.$emit("update",this.editedTitle,this.card.id),this.toggleEdit()},cancel:function(){this.editedTitle=this.card.title,this.toggleEdit()},destroy:function(){confirm("Are you sure?")&&this.$emit("destroy",this.card.id)}}},i={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("li",{staticClass:"card mb-3 p-2"},[r("input",{directives:[{name:"show",rawName:"v-show",value:t.editing,expression:"editing"},{name:"model",rawName:"v-model",value:t.newTitle,expression:"newTitle"}],ref:"editTitle",staticClass:"lead p-2",attrs:{type:"text",placeholder:"Enter a task..."},domProps:{value:t.newTitle},on:{keyup:[function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;t.update(e)},function(e){if(!("button"in e)&&t._k(e.keyCode,"escape",void 0,e.key))return null;t.cancel(e)}],input:function(e){e.target.composing||(t.newTitle=e.target.value)}}}),t._v(" "),r("p",{directives:[{name:"show",rawName:"v-show",value:!t.editing,expression:"!editing"}],staticClass:"title lead mb-2 p-2",on:{dblclick:t.toggleEdit}},[r("button",{staticClass:"close text-muted",on:{click:t.destroy}},[t._v("\n      Ã—\n    ")]),t._v("\n    "+t._s(t.card.title)+"\n  ")])])},staticRenderFns:[]};var s=r("VU/8")(n,i,!1,function(t){r("I+po")},"data-v-5dafd2a8",null).exports,d={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],staticClass:"lead mb-3 p-2",attrs:{type:"text",placeholder:"Enter a task..."},domProps:{value:t.title},on:{keyup:[function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;t.create(e)},function(e){if(!("button"in e)&&t._k(e.keyCode,"escape",void 0,e.key))return null;t.cancel(e)}],input:function(e){e.target.composing||(t.title=e.target.value)}}})},staticRenderFns:[]};var c=r("VU/8")({name:"KanbanCardNew",data:function(){return{title:""}},methods:{create:function(){this.$emit("create",this.title),this.title=""},cancel:function(){this.$emit("cancel"),this.title=""}}},d,!1,function(t){r("9wWf")},"data-v-453d5580",null).exports,o=r("DAYN"),u=r.n(o),l={name:"KanbanBoard",components:{KanbanCard:s,KanbanCardNew:c,draggable:u.a},props:["track","cards"],data:function(){return{creatingCard:!1,newCardText:"&plus;",editing:!1,newTitle:this.track.title}},computed:{cardsOrdered:{get:function(){return this.cards.sort(function(t,e){return t.order-e.order})},set:function(t){this.$emit("update-all-cards",t,this.track.id)}}},methods:{edit:function(){this.editing=!this.editing,this.$nextTick(function(){this.$refs.editing.focus(),this.$refs.editing.select()})},update:function(){this.$emit("update-track",this.newTitle,this.track.id),this.editing=!this.editing},cancel:function(){this.newTitle=this.track.title,this.editing=!this.editing},newCard:function(){var t=this;this.creatingCard=!this.creatingCard,this.creatingCard?(this.newCardText="&times;",this.$nextTick(function(){return t.$refs.newCard.$el.focus()})):(this.newCardText="&plus;",this.$nextTick(function(){return t.$refs.newCard.$el.blur()}))},createCard:function(t){this.$emit("create-card",t,this.track.id)},updateCard:function(t,e){this.$emit("update-card",t,e)},cancelCard:function(){this.newCard()},destroyCard:function(t){this.$emit("destroy-card",t)}}},h={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"track p-3"},[r("header",{staticClass:"d-flex justify-content-between align-items-start"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.newTitle,expression:"newTitle"},{name:"show",rawName:"v-show",value:t.editing,expression:"editing"}],ref:"editing",staticClass:"h4 mb-3",attrs:{placeholder:"Enter a title..."},domProps:{value:t.newTitle},on:{keyup:[function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;t.update(e)},function(e){if(!("button"in e)&&t._k(e.keyCode,"escape",void 0,e.key))return null;t.cancel(e)}],input:function(e){e.target.composing||(t.newTitle=e.target.value)}}}),t._v(" "),r("h2",{directives:[{name:"show",rawName:"v-show",value:!t.editing,expression:"!editing"}],staticClass:"title h4 mb-3",on:{dblclick:t.edit}},[t._v("\n      "+t._s(t.track.title)+"\n    ")]),t._v(" "),r("button",{staticClass:"btn btn-add btn-sm btn-dark",domProps:{innerHTML:t._s(t.newCardText)},on:{click:t.newCard}})]),t._v(" "),r("ul",{staticClass:"cards list-group"},[r("kanban-card-new",{directives:[{name:"show",rawName:"v-show",value:t.creatingCard,expression:"creatingCard"}],ref:"newCard",on:{create:t.createCard,cancel:t.cancelCard}}),t._v(" "),r("draggable",{staticClass:"drag-area",attrs:{options:{group:"track"}},model:{value:t.cardsOrdered,callback:function(e){t.cardsOrdered=e},expression:"cardsOrdered"}},t._l(t.cardsOrdered,function(e){return r("kanban-card",{key:e.id,attrs:{card:e},on:{update:t.updateCard,destroy:t.destroyCard}})}))],1)])},staticRenderFns:[]};var f=r("VU/8")(l,h,!1,function(t){r("lxVI")},"data-v-3088f264",null).exports,p=r("mtWM"),k=r.n(p),v={name:"KanbanBoard",components:{KanbanTrack:f,draggable:u.a},data:function(){return{title:"Let's Kanban!",errorMessage:"",tracks:[],cards:[]}},created:function(){var t=this;this.loadTracks().then(function(){return t.loadCards()})},computed:{tracksOrdered:function(){if(this.tracks.length>0)return this.tracks.sort(function(t,e){return t.order-e.order})},tracksOrderedWithCards:{get:function(){var t=this;if(this.cards.length>0)return this.tracksOrdered.forEach(function(e){return e.cards=t.cards.filter(function(t){return t.trackId===e.id})}),this.tracksOrdered},set:function(t){var e=this;t.forEach(function(t,r){t=e.tracks.filter(function(e){return e.id===t.id})[0];e.$set(t,"order",r+1)}),this.postTracks()}}},methods:{loadTracks:function(){var t=this;return k.a.get("./static/mock_api/tracks.json").then(function(e){t.tracks=e.data}).catch(function(e){t.errorMessage="There was a problem with the API!"})},loadCards:function(){var t=this;return k.a.get("./static/mock_api/cards.json").then(function(e){t.cards=e.data}).catch(function(e){t.errorMessage="There was a problem with the API!"})},postTracks:function(){var t=this;return k.a.post("./static/mock_api/tracks.json",t.tracks).then(function(e){t.tracks=e.data}).catch(function(t){})},postCards:function(){var t=this;return k.a.post("./static/mock_api/cards.json",t.tracks).then(function(e){t.cards=e.data}).catch(function(t){})},updateTrack:function(t,e){var r=this.tracks.filter(function(t){return t.id===e})[0];this.$set(r,"title",t),this.postTracks()},nextCardId:function(){if(this.cards.length>0)var t=this.cards.sort(function(t,e){return t.id-e.id})[this.cards.length-1];return(t||{id:0}).id+1},nextCardOrder:function(t){var e=this.tracks.filter(function(e){return t===e.id})[0];if(e.cards.length>0)var r=e.cards.sort(function(t,e){return t.order-e.order})[e.cards.length-1];return(r||{order:0}).order+1},createCard:function(t,e){var r={id:this.nextCardId(),order:this.nextCardOrder(e),title:t,trackId:e};this.cards.push(r),this.postCards()},updateCard:function(t,e){var r=this.cards.filter(function(t){return t.id==e})[0];this.$set(r,"title",t),this.postCards()},updateAllCards:function(t,e){t.forEach(function(t,e){return t.order=e}),t.forEach(function(t){return t.trackId=e}),this.tracks.filter(function(t){return t.id==e})[0].cards=t,this.postCards()},destroyCard:function(t){this.cards=this.cards.filter(function(e){return e.id!==t}),this.postCards()}}},m={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"board-wrapper"},[r("header",[r("h1",{staticClass:"title h3 m-0 text-center"},[t._v(t._s(t.title))])]),t._v(" "),r("div",{staticClass:"board"},[r("div",{directives:[{name:"show",rawName:"v-show",value:t.errorMessage,expression:"errorMessage"}],staticClass:"alert alert-danger text-center"},[t._v("\n      "+t._s(t.errorMessage)+"\n    ")]),t._v(" "),r("draggable",{staticClass:"drag-area row",attrs:{options:{group:"board"}},model:{value:t.tracksOrderedWithCards,callback:function(e){t.tracksOrderedWithCards=e},expression:"tracksOrderedWithCards"}},t._l(t.tracksOrderedWithCards,function(e){return r("kanban-track",{key:e.id,staticClass:"col",attrs:{track:e,cards:e.cards},on:{"update-track":t.updateTrack,"create-card":t.createCard,"update-card":t.updateCard,"update-all-cards":t.updateAllCards,"destroy-card":t.destroyCard}})}))],1)])},staticRenderFns:[]};var g={name:"App",components:{KanbanBoard:r("VU/8")(v,m,!1,function(t){r("xh1y")},"data-v-eda43406",null).exports}},C={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("KanbanBoard")],1)},staticRenderFns:[]};var w=r("VU/8")(g,C,!1,function(t){r("JJGO")},null,null).exports;a.a.config.productionTip=!1,new a.a({el:"#app",components:{App:w},template:"<App/>"})},lxVI:function(t,e){},xh1y:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.11e93bbea7a2d0590de8.js.map